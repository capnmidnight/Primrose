var glob = require("glob").sync,
  path = require("path");

function lsJSFiles(dir){
  var files = glob(dir + "/**/*.js");
  files.sort(function(a, b) {
    var pa = path.parse(a),
      pb = path.parse(b);

    if(pa.dir < pb.dir) {
      return -1;
    }
    else if(pa.dir > pb.dir) {
      return 1;
    }
    else {
      a = pa.name.toLocaleUpperCase();
      b = pb.name.toLocaleUpperCase();
      if(a < b){
        return -1;
      }
      else if(a > b){
        return 1;
      }
      else{
        return 0;
      }
    }
  });
  return files;
}

if (typeof module !== "undefined") {
  module.exports = lsJSFiles;
}