<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, shrink-to-fit=0, initial-scale=1.0">
    <meta name="apple-touch-fullscreen" content="yes">
    <meta name="web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="theme-color" content="black">
    <meta name="description" content="A WebVR application framework.">
    <meta name="keywords" content="WebGL, WebVR, HTML5, JavaScript, text editor, source code editor, virtual reality, Primrose">
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@Primrose_VR">
    <meta property="og:site_name" content="Primrose VR">
    <meta property="og:description" content="Primrose: Framework for WebVR Applications">
    <meta name="twitter:description" content="Primrose: Framework for WebVR Applications">
    <meta property="og:url" content="http://www.primrosevr.com/undefined"><!-- start main.pug meta block -->
    <meta name="twitter:image" content="http://www.primrosevr.com/images/screenshot.jpg">
    <meta property="og:image" content="http://www.primrosevr.com/images/screenshot.jpg"><!-- end main.pug meta block -->
<!-- start main.pug title block -->
    <meta property="og:title" content="Primrose VR: WebVR Application Framework">
    <meta name="twitter:title" content="Primrose VR: WebVR Application Framework">
    <title>Primrose VR: WebVR Application Framework</title><!-- end main.pug title block -->
    <link type="text/css" rel="stylesheet" href="../doc/style.css"><!-- start documentation.pug head append -->
    <script src="../node_modules/lavu-details-polyfill/lib/index.js"></script>
    <script src="../../pliny/node_modules/marked/marked.min.js"></script>
    <script src="../../pliny/src/pliny.js"></script>
    <script src="../Primrose.js"></script>
    <script src="../doc/PrimroseDocumentation.js"></script><!-- end documentation.pug head append -->
    <script src="../ga.js"></script>
  </head>
  <body>
    <header role="banner"><a id="logo" href="../"><img src="../doc/images/primrose40.png" alt="logo" title="Primrose logo"><span class="version-number">v0.31.0</span></a>
      <nav role="navigation">
        <ul>
          <li><a href="../doc/">Docs</a></li>
          <li><a href="../doc/faq.html">FAQ</a></li>
          <li><a href="../doc/community.html">Community</a></li>
          <li><a href="https://github.com/NotionTheory/Primrose/" target="_blank">Github</a></li>
        </ul>
      </nav>
      <h1>Pairing Multiple SteamVR Controllers</h1>
    </header><!-- start main.pug banner block --><!-- end main.pug banner block -->
<!-- start main.pug main block -->
    <main><!-- start documentation.pug main block -->
      <div id="top"></div>
      <div id="contents">
        <nav>
          <ul>
            <li><a href="../doc/readme.html">Installation &amp; Setup</a></li>
            <li><a href="../doc/contributing.html">Contributing</a></li>
            <li><a href="../doc/demos.html">Demos</a></li>
            <li><a href="../doc/changelog.html">Change Log</a></li>
            <li><a href="../doc/steamVRDongles.html">Pairing Multiple SteamVR Controllers</a></li>
          </ul>
        </nav>
      </div>
      <div id="documentation">
        <section>
          <article><!-- start documentation.pug documentation block -->
            <p>SteamVR and the HTC Vive at first appear to only support two wireless controllers. You can plug more controllers in over USB, but there is no apparent process for pairing more controllers over a wireless connection.</p>
            <p>This is because there is a little bit of a conceit going on with the two existing controllers. The HTC Vive head-mounted display is not just a display. It also has an entire USB hub inside of it (including a spare USB port, if you have any devices of your own you would like to connect!). Soldered directly into that USB hub are two standard <a href="http://store.steampowered.com/app/530260/" target="_blank">Steam Controller wireless dongles</a>, reflashed with a firmware specific to the Vive controllers. When you pair a controller "with the headset", you're really just pairing to those USB wireless dongles that just so happen to be inside the headset.</p>
            <p>This means that, if we have a process to reflash our own Steam Controller dongles, we can connect more than two Vive controllers in a wireless configuration.</p>
            <p>The process is a little convoluted, because the SteamVR UI only expects to be able to pair two controllers at a time. But you can trick it into complying by removing all hardware, adding two dongles at a time, pairing controllers, and repeating until you have all controllers paired with all dongles. Once the pairing song and dance is complete, you can reconnect all dongles at once and suddenly SteamVR recognizes more than two controllers.</p>
            <p>Here we go.</p>
            <h2>Reflash Steam Controller Dongles to be SteamVR Dongles.</h2>
            <p>We'll need the SteamVR Tracking Hardware Development Kit to perform the next two tasks, as it has the tool that we will use to reflash the dongles. If you don't have your own means to gain access to the HDK, I don't know how else you will get it. As an alternative to this step and the next, you could email us at [info@notiontheory.com](mailto:info@notiontheory.com) and we could flash a couple of dongles for you and send them to you, for the cost of the dongles and shipping.</p>
            <h3>Step 1: Install the SteamVR Tracking Hardware Development Kit.</h3>
            <ol>
              <li>Open Steam.</li>
              <li>Log in to your own account.</li>
              <li>Go to Library &gt; Software.</li>
              <li>Install "SteamVR Tracking HDK".</li>
              <li>Locate your Steam installation directory (it’s usually <code>C:\Program Files (x86)\Steam</code>).</li>
              <li>Locate your SteamVR HDK directory (it should be <code>&lt;Steam Install Directory&gt;\steamapps\common\SteamVR Tracking HDK</code>)</li>
              <li>Add the HDK tools directory to your System Path
                <ol>
                  <li>It should be <code>&lt;SteamVR HDK Directory&gt;\tools\bin\win32</code>)</li>
                  <li>Open the Start Menu and type "Path". Select "Edit the system environment variables"</li>
                  <li>Click the "Environment Variables…" button</li>
                  <li>In the "System Variables" list, select "Path"</li>
                  <li>Click "Edit"</li>
                  <li>Click "New"</li>
                  <li>Copy and paste the HDK tools directory into the text box.</li>
                  <li>OK out of all of the dialog boxes.</li>
                </ol>
              </li>
            </ol>
            <h3>Step 2: Reflash Steam Controller dongles to be SteamVR dongles.</h3>
            <p>This can be done all at once, and it will only update devices that need to be updated. However, just to be safe, make sure the headset and link box are completely disconnected before you do this.</p>
            <ol>
              <li>Completely disconnect the Vive link box from the PC.</li>
              <li>Plug in all Steam Controller dongles that need to be reflashed.</li>
              <li>(Optional) Use scotch tape and a pen to label the dongle "VR" so later we know it has been reflashed already.</li>
              <li>Open Windows PowerShell (open the Start Menu and type "PowerShell". Hit Enter.)</li>
              <li>Navigate to <code>&lt;SteamVR HDK Directory&gt;\firmware\&lt;latest version&gt;</code>. As of this writing, the latest version is <code>10.27.2016</code></li>
              <li>Run the reflash command:
                <ul>
                  <li><code>lighthouse_watchman_update -D watchman_v3_dongle.bin</code></li>
                  <li>Note that the switch is an uppercase D, not a lowercase d.</li>
                  <It>takes about 30 seconds to get through a single dongle. The tool will iterate through all dongles connected to the system and reflash any that are an older version than the version being flashed.</It>
                </ul>
              </li>
            </ol>
            <h2>Pair All of the Controllers</h2>
            <p>This is the tricky part. SteamVR only displays two unpaired controllers at a time, and if there are two controllers connected to the system, it will not show any more pair-able controller slots. So you have to trick it by pairing two controllers at a time, removing those controller dongles, adding two more, and continuing with the pairing process.</p>
            <ol>
              <li>Remove all SteamVR hardware from the system.</li>
              <li>Start SteamVR</li>
              <li>Add two SteamVR dongles (the ones now labeled "VR" with masking tape).</li>
              <li>Right-click one of the grey controller icons in SteamVR and select "Pair Controller".</li>
              <li>Follow the on-screen instructions for pairing.</li>
              <li>Click "pair another controller" and finish the pairing for the second controller.</li>
              <li>If more controllers need to be paired:
                <ol>
                  <li>Remove the two SteamVR dongles</li>
                  <li>return to step #3 above.</li>
                </ol>
              </li>
            </ol>
            <p>Once all controllers have been paired, you can plug in all of the dongles, turn the controllers on, and SteamVR should now populate more controller icons for any controllers past 2.</p>
            <p>We don’t know what game support is like, but at least in the SteamVR System View, you should see all of the controllers appear and be independently usable.</p><!-- end documentation.pug documentation block -->
          </article>
        </section>
      </div><!-- end documentation.pug main block -->
    </main><!-- end main.pug main block -->
<!-- start main.pug footer block -->
    <footer>
      <div id="footerWrapper"><a href="../doc/readme.html">About</a><a href="../doc/license.html">License</a><a href="../doc/changelog.html">Changelog</a><a href="https://notiontheory.typeform.com/to/QzZmAD" target="_blank">Slack</a><a class="small icon github" href="https://www.github.com/NotionTheory/Primrose" target="_blank">&nbsp;</a><a class="small icon twitter" href="https://www.twitter.com/Primrose_VR" target="_blank">&nbsp;</a><a href="http://www.notiontheory.com/team" target="_blank" style="color:#ec2471;">Made (with love) by NotionTheory</a></div>
      <script src="app.js"></script>
    </footer><!-- end main.pug footer block -->
  </body>
</html>